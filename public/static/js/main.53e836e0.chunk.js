(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,a){e.exports=a.p+"static/media/spinner.cffa9d9d.gif"},43:function(e,t,a){e.exports=a(75)},48:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),l=a.n(c),o=a(16),s=a(14),u=(a(48),Object(n.createContext)()),i=Object(n.createContext)(),m=function(e){var t=e.icon,a=Object(n.useContext)(u),c=Object(n.useContext)(i),l=a.isAuthenticated,s=a.logoutUser,m=a.user,p=c.clearContacts,d=r.a.createElement(n.Fragment,null,r.a.createElement("li",null,"Hello ",m&&m.name),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){s(),p()},href:"#!"},r.a.createElement("i",{className:"fas fa-sign-out-alt"}),r.a.createElement("span",{className:"hide-sm"},"Logout")))),E=r.a.createElement(n.Fragment,null,r.a.createElement("li",null,r.a.createElement(o.b,{to:"/login"},"Login"),r.a.createElement(o.b,{to:"/register"},"Register")));return r.a.createElement("div",{className:"navbar bg-primary"},r.a.createElement("h3",null,r.a.createElement("i",{className:t})," Contact Keeper"),r.a.createElement("ul",null,l?d:E))};m.defaultProps={icon:"fas fa-id-card-alt"};var p=m,d=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"About this App"),r.a.createElement("p",{className:"my-1"},"This is a full stack React app for keeping contacts"),r.a.createElement("p",{className:"bg-dark p"},r.a.createElement("strong",null,"Version: "),"1.0.0"))},E=a(78),f=a(77),b=function(e){var t=e.contact,a=Object(n.useContext)(i),c=a.deleteContact,l=a.setCurrent,o=a.clearCurrent,s=t.name,u=t._id,m=t.email,p=t.phone,d=t.type;return r.a.createElement("div",{className:"card bg-light"},r.a.createElement("h3",{className:"text-primary text-left"},s," ",r.a.createElement("span",{style:{float:"right"},className:"badge ".concat("professional"===d?"badge-success":"badge-primary")},d.charAt(0).toUpperCase()+d.slice(1))),r.a.createElement("ul",{className:"list"},m&&r.a.createElement("li",null,r.a.createElement("i",{className:"fas fa-envelope-open"})," ",m),p&&r.a.createElement("li",null,r.a.createElement("i",{className:"fas fa-phone"})," ",p)),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){return l(t)},className:"btn btn-dark btn-sm"},"Edit"),r.a.createElement("button",{onClick:function(){o(),console.log(u),c(u)},className:"btn btn-danger btn-sm"},"Delete")))},y=a(37),C=a.n(y),g=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("img",{src:C.a,alt:"loading..",className:"spinner"}))},h=function(){var e=Object(n.useContext)(i),t=e.contacts,a=e.filtered,c=e.getContacts,l=e.loading;return Object(n.useEffect)(function(){c()},[]),null===t||0!==t.length||l?r.a.createElement(n.Fragment,null,null===t||l?r.a.createElement(g,null):r.a.createElement(E.a,null,a?a.map(function(e){return r.a.createElement(f.a,{key:e._id,timeout:100,classNames:"item"},r.a.createElement(b,{contact:e}))}):t.map(function(e){return r.a.createElement(f.a,{key:e._id,timeout:500,classNames:"item"},r.a.createElement(b,{contact:e}))}))):r.a.createElement("h4",null,"Please add a contact")},v=a(13),O=a(1),j=a(7),T=function(){var e=Object(n.useContext)(i),t=e.addContact,a=e.current,c=e.clearCurrent,l=e.updateContact;Object(n.useEffect)(function(){m(null!==a?a:{name:"",email:"",phone:"",type:"personal"})},[a,e]);var o=Object(n.useState)({name:"",email:"",phone:"",type:"personal"}),s=Object(j.a)(o,2),u=s[0],m=s[1],p=function(e){var t=e.target.name;m(Object(O.a)({},u,Object(v.a)({},t,e.target.value)))},d=u.name,E=u.email,f=u.type,b=u.phone;return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a?l(u):t(u),m({name:"",email:"",phone:"",type:"personal"})}},r.a.createElement("h2",{className:"text-primary"},a?"Edit Contact":"Add Contact"),r.a.createElement("input",{type:"text",placeholder:"Name",name:"name",value:d,onChange:p}),r.a.createElement("input",{type:"email",className:"",placeholder:"Email",name:"email",value:E,onChange:p}),r.a.createElement("input",{type:"text",placeholder:"Phone",name:"phone",value:b,onChange:p}),r.a.createElement("h5",null,"Contact Type"),r.a.createElement("input",{type:"radio",name:"type",value:"personal",checked:"personal"===f,onChange:p}),"Personal"," ",r.a.createElement("input",{type:"radio",name:"type",value:"professional",checked:"professional"===f,onChange:p}),"Professional "," ",r.a.createElement("div",null,r.a.createElement("input",{type:"submit",className:"btn btn-primary btn-block",value:a?"Save Changes":"Add Contact"})),a&&r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){c()},className:"btn btn-light btn-block"},"Clear")))},R=function(e){var t=Object(n.useContext)(i),a=t.filterContacts,c=t.clearFilter,l=t.filtered,o=Object(n.useRef)("");Object(n.useEffect)(function(){null===l&&(o.current.value="")},[]);return r.a.createElement("form",null,r.a.createElement("input",{type:"text",ref:o,placeholder:"Filter Contacts...",onChange:function(e){""!==o.current.value?a(e.target.value):c()}}))},A=function(){var e=Object(n.useContext)(u).loadUser;return Object(n.useEffect)(function(){e()},[]),r.a.createElement("div",{className:"grid-2"},r.a.createElement("div",null,r.a.createElement(T,null)),r.a.createElement("div",null,r.a.createElement(R,null),r.a.createElement(h,{className:"grid-3"})))},N=a(4),x=a.n(N),k=a(11),_=a(9),S=a.n(_),w=a(18),L=function(e,t){switch(t.type){case"GET_CONTACTS":return Object(O.a)({},e,{contacts:t.payload,loading:!1});case"ADD_CONTACT":return Object(O.a)({},e,{contacts:[t.payload].concat(Object(w.a)(e.contacts)),loading:!1});case"DELETE_CONTACT":return Object(O.a)({},e,{contacts:e.contacts.filter(function(e){return e._id!==t.payload}),loading:!1});case"CLEAR_CONTACT":return Object(O.a)({},e,{error:null,contacts:null,filtered:null,current:null});case"SET_CURRENT":return Object(O.a)({},e,{current:t.payload,loading:!1});case"CLEAR_CURRENT":return Object(O.a)({},e,{current:null});case"UPDATE_CONTACT":return Object(O.a)({},e,{contacts:e.contacts.map(function(e){return e._id===t.payload._id?t.payload:e}),loading:!1});case"FILTER_CONTACT":return Object(O.a)({},e,{filtered:e.contacts.filter(function(e){var a=new RegExp("".concat(t.payload),"gi");return e.name.match(a)||e.email.match(a)})});case"CONTACT_ERROR":return Object(O.a)({},e,{error:t.payload});case"CLEAR_FILTER":return Object(O.a)({},e,{filtered:null});default:return e}},F=function(e){var t=Object(n.useReducer)(L,{contacts:null,current:null,filtered:null,error:null}),a=Object(j.a)(t,2),c=a[0],l=a[1],o=function(){var e=Object(k.a)(x.a.mark(function e(){var t;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("/api/contacts");case 3:t=e.sent,l({type:"GET_CONTACTS",payload:t.data.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l({type:"CONTACT_ERROR",payload:e.t0.response.error});case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(k.a)(x.a.mark(function e(t){var a,n;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,S.a.post("/api/contacts",t,a);case 4:n=e.sent,l({type:"ADD_CONTACT",payload:n.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),l({type:"CONTACT_ERROR",payload:e.t0.response.error});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(k.a)(x.a.mark(function e(t){var a,n;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,S.a.put("/api/contacts/".concat(t._id),t,a);case 4:n=e.sent,l({type:"UPDATE_CONTACT",payload:n.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),l({type:"CONTACT_ERROR",payload:e.t0.response.error});case 11:p();case 12:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(k.a)(x.a.mark(function e(t){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.delete("/api/contacts/".concat(t));case 3:l({type:"DELETE_CONTACT",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l({type:"CONTACT_ERROR",payload:e.t0.response.error});case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),p=function(){l({type:"CLEAR_CURRENT"})};return r.a.createElement(i.Provider,{value:{contacts:c.contacts,current:c.current,filtered:c.filtered,error:c.error,addContact:s,deleteContact:m,setCurrent:function(e){l({type:"SET_CURRENT",payload:e})},clearCurrent:p,updateContact:u,filterContacts:function(e){l({type:"FILTER_CONTACT",payload:e})},clearFilter:function(){l({type:"CLEAR_FILTER"})},getContacts:o,clearContacts:function(){l({type:"CLEAR_CONTACT"})}}},e.children)},I=function(e,t){switch(t.type){case"USER_LOADED":return Object(O.a)({},e,{isAuthenticated:!0,loading:!1,user:t.payload});case"REGISTER_SUCCESS":return localStorage.setItem("token",t.payload),Object(O.a)({},e,{token:t.payload,isAuthenticated:!0,loading:!1});case"REGISTER_FAIL":return localStorage.removeItem("token"),Object(O.a)({},e,{token:null,isAuthenticated:!1,loading:!1,user:null,error:t.payload});case"CLEAR_ERRORS":return Object(O.a)({},e,{error:null});case"LOGIN_SUCCESS":return localStorage.setItem("token",t.payload),Object(O.a)({},e,{token:t.payload,isAuthenticated:!0,loading:!1});case"LOGIN_FAIL":case"LOGOUT":case"AUTH_ERROR":return localStorage.removeItem("token"),Object(O.a)({},e,{token:null,isAuthenticated:!1,loading:!1,user:null,error:t.payload});case"SET_LOADING":return Object(O.a)({},e,{loading:!0});default:return e}},U=function(e){e?S.a.defaults.headers.common["x-auth-token"]=e:delete S.a.headers.common["x-auth-token"]},D=function(e){var t={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null,error:null},a=Object(n.useReducer)(I,t),c=Object(j.a)(a,2),l=c[0],o=c[1],s=function(){var e=Object(k.a)(x.a.mark(function e(){var t,a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&U(localStorage.token),e.prev=1,p(),e.next=5,S.a.get("/api/auth");case 5:t=e.sent,o({type:"USER_LOADED",payload:t.data.data}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),a=e.t0.response.msg,o({type:"AUTH_ERROR",payload:a});case 13:case"end":return e.stop()}},e,null,[[1,9]])}));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(k.a)(x.a.mark(function e(t){var a,n,r,c;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"Application/json"}},e.prev=1,p(),e.next=5,S.a.post("/api/users",t,a);case 5:n=e.sent,r=n.data.data,o({type:"REGISTER_SUCCESS",payload:r}),s(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),c=e.t0.response.data.error,o({type:"REGISTER_FAIL",payload:c});case 15:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(k.a)(x.a.mark(function e(t){var a,n,r,c;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"Application/json"}},e.prev=1,p(),e.next=5,S.a.post("/api/auth",t,a);case 5:n=e.sent,r=n.data.data,o({type:"LOGIN_SUCCESS",payload:r}),s(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),c=e.t0.response.data.error,o({type:"LOGIN_FAIL",payload:c});case 15:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t){return e.apply(this,arguments)}}(),p=function(){return o({type:"SET_LOADING"})};return r.a.createElement(u.Provider,{value:{token:l.token,isAuthenticated:l.isAuthenticated,loading:l.loading,user:l.user,error:l.error,setLoading:p,register:i,loadUser:s,loginUser:m,logoutUser:function(){return o({type:"LOGOUT"})},clearErrors:function(){return o({type:"CLEAR_ERRORS"})}}},e.children)},P=Object(n.createContext)(),G=function(e){var t=Object(n.useContext)(P),a=Object(n.useContext)(u),c=t.setAlert,l=a.register,o=a.error,s=a.clearErrors,i=a.isAuthenticated,m=Object(n.useState)({name:"",email:"",password:"",password2:""}),p=Object(j.a)(m,2),d=p[0],E=p[1];Object(n.useEffect)(function(){o&&(c(o,"danger"),s()),i&&e.history.push("/")},[i,o,e.history]);var f=function(e){E(Object(O.a)({},d,Object(v.a)({},e.target.name,e.target.value)))},b=d.name,y=d.email,C=d.password,g=d.password2;return r.a.createElement("div",{className:"form-container"},r.a.createElement("h1",null,"Account ",r.a.createElement("span",{className:"text-primary"},"Register")),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""===b||""===y||""===C?c("Please enter all Fields","danger"):C!==g?c("Passwords do not match","danger"):l(d)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{value:b,type:"text",name:"name",required:!0,onChange:f})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{value:y,type:"email",name:"email",required:!0,onChange:f})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{value:C,type:"password",required:!0,name:"password",onChange:f,minLength:6})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password2"},"Confirm Password"),r.a.createElement("input",{value:g,type:"password",required:!0,name:"password2",onChange:f})),r.a.createElement("input",{type:"submit",value:"Register",className:"btn btn-block btn-primary"})))},q=function(e){var t=Object(n.useContext)(u),a=Object(n.useContext)(P),c=t.loginUser,l=t.error,o=t.clearErrors,s=t.isAuthenticated,i=a.setAlert;Object(n.useEffect)(function(){l&&(i(l,"danger"),o()),s&&e.history.push("/")},[s,l,e.history]);var m=Object(n.useState)({email:"",password:""}),p=Object(j.a)(m,2),d=p[0],E=p[1],f=d.email,b=d.password,y=function(e){E(Object(O.a)({},d,Object(v.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"form-container"},r.a.createElement("h1",null,"Account ",r.a.createElement("span",{className:"text-primary"},"Login")),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""===f||""===b?i("Please Fill in all Fields","danger"):c(d)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{required:!0,value:f,type:"email",name:"email",onChange:y})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{required:!0,value:b,type:"password",name:"password",onChange:y})),r.a.createElement("input",{type:"submit",value:"Login",className:"btn btn-block btn-primary"})))},H=function(e,t){switch(t.type){case"SET_ALERT":return[].concat(Object(w.a)(e),[t.payload]);case"REMOVE_ALERT":return e.filter(function(e){return e.id!==t.payload});default:return e}},V=a(40),J=a.n(V),M=function(e){var t=Object(n.useReducer)(H,[]),a=Object(j.a)(t,2),c=a[0],l=a[1];return r.a.createElement(P.Provider,{value:{alerts:c,setAlert:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,n=J.a.v4();l({type:"SET_ALERT",payload:{msg:e,type:t,id:n}}),setTimeout(function(){return l({type:"REMOVE_ALERT",payload:n})},a)}}},e.children)},B=function(){var e=Object(n.useContext)(P).alerts;return r.a.createElement(n.Fragment,null,e&&e.map(function(e){return r.a.createElement("div",{key:e.id,className:"alert alert-".concat(e.type)},r.a.createElement("i",{className:"fas fa-info-circle"})," ",e.msg)}))},K=a(41),z=function(e){var t=e.component,a=Object(K.a)(e,["component"]),c=Object(n.useContext)(u),l=c.isAuthenticated,o=c.loading;return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return l||o?r.a.createElement(t,e):r.a.createElement(s.a,{to:"/login"})}}))};localStorage.token&&U(localStorage.token);var Q=function(){return r.a.createElement(D,null,r.a.createElement(F,null,r.a.createElement(M,null,r.a.createElement(o.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(p,null),r.a.createElement("div",{className:"container"},r.a.createElement(B,null),r.a.createElement(s.d,null,r.a.createElement(z,{exact:!0,path:"/",component:A}),r.a.createElement(s.b,{exact:!0,path:"/about",component:d}),r.a.createElement(s.b,{exact:!0,path:"/register",component:G}),r.a.createElement(s.b,{exact:!0,path:"/login",component:q}))))))))};l.a.render(r.a.createElement(Q,null),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.53e836e0.chunk.js.map